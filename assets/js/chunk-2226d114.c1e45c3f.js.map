{"version":3,"sources":["webpack:///./src/views/index.vue?228b","webpack:///src/views/index.vue","webpack:///./src/views/index.vue?980c","webpack:///./src/views/index.vue","webpack:///./src/views/index.vue?5cfd","webpack:///./src/api/index.js","webpack:///./src/utils/support.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticStyle","on","handleSearchList","model","value","callback","$$v","keyword","expression","handleCategoryChange","categoryName","_l","item","_s","handleSortChange","sort","staticClass","book","pic","bookName","author","_f","publishDate","press","price","description","id","$event","handleAddCart","total","handleCurrentChange","pageNum","staticRenderFns","component","searchBooks","pageSize","request","url","method","data","addCart","username","bookId","setCookie","key","expires","Cookies","set","getCookie","get"],"mappings":"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","file":"assets/js/chunk-2226d114.c1e45c3f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-breadcrumb',{attrs:{\"separator\":\"\"}},[_c('a-breadcrumb-item',[_vm._v(\" 当前位置：首页 \")])],1),_c('a-divider'),_c('div',[_vm._v(\" 全文检索： \"),_c('a-input-search',{staticStyle:{\"margin-right\":\"30px\",\"width\":\"300px\"},attrs:{\"placeholder\":\"关键词/书名/作者\"},on:{\"search\":_vm.handleSearchList},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),_vm._v(\" 分类： \"),_c('a-select',{staticStyle:{\"margin-right\":\"30px\",\"width\":\"250px\"},attrs:{\"default-value\":\"全部\"},on:{\"change\":_vm.handleCategoryChange},model:{value:(_vm.categoryName),callback:function ($$v) {_vm.categoryName=$$v},expression:\"categoryName\"}},_vm._l((_vm.catagoryOptions),function(item){return _c('a-select-option',{attrs:{\"value\":item}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),1),_vm._v(\" 排序: \"),_c('a-select',{staticStyle:{\"width\":\"250px\"},attrs:{\"default-value\":\"按出版时间排序\"},on:{\"change\":_vm.handleSortChange},model:{value:(_vm.sort),callback:function ($$v) {_vm.sort=$$v},expression:\"sort\"}},_vm._l((_vm.sortOptions),function(item){return _c('a-select-option',{attrs:{\"value\":item}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),1)],1),_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"bookList\"},[_c('ul',_vm._l((_vm.list),function(book){return _c('li',[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":book.pic}})]),_c('div',{staticClass:\"info\"},[_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(book.bookName))]),_c('div',{staticClass:\"otherInfo\"},[_c('a-breadcrumb',[_c('a-breadcrumb-item',[_vm._v(_vm._s(book.author))]),_c('a-breadcrumb-item',[_vm._v(\" \"+_vm._s(_vm._f(\"formatTime\")(book.publishDate))+\" \")]),_c('a-breadcrumb-item',[_vm._v(_vm._s(book.press))])],1)],1),_c('div',{staticClass:\"priceWrap\"},[_c('span',{staticClass:\"sellPrice\"},[_vm._v(\"¥\"+_vm._s(book.price))])]),_c('p',{staticClass:\"desc\"},[_vm._v(_vm._s(book.description))]),_c('div',{staticClass:\"action\"},[_c('el-button',{attrs:{\"type\":\"danger\",\"round\":\"\",\"id\":book.id},on:{\"click\":function($event){return _vm.handleAddCart($event)}}},[_vm._v(\"加入购物车\")])],1)])])}),0)]),_c('a-pagination',{staticStyle:{\"margin-top\":\"15px\",\"float\":\"right\"},attrs:{\"page-size\":10,\"total\":_vm.total,\"show-less-items\":\"\"},on:{\"change\":_vm.handleCurrentChange},model:{value:(_vm.pageNum),callback:function ($$v) {_vm.pageNum=$$v},expression:\"pageNum\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <a-breadcrumb separator=\"\">\r\n            <a-breadcrumb-item>\r\n                当前位置：首页\r\n            </a-breadcrumb-item>\r\n        </a-breadcrumb>\r\n        <a-divider></a-divider>\r\n        <div>\r\n            全文检索：\r\n            <a-input-search v-model=\"keyword\" style=\"margin-right:30px;width:300px;\" placeholder=\"关键词/书名/作者\" @search=\"handleSearchList\" />\r\n            分类：\r\n            <a-select v-model=\"categoryName\" default-value=\"全部\" style=\"margin-right:30px;width: 250px\" @change=\"handleCategoryChange\">\r\n                <a-select-option v-for=\"item in catagoryOptions\" :value=\"item\">\r\n                    {{item}}\r\n                </a-select-option>\r\n            </a-select>\r\n            排序:\r\n            <a-select v-model=\"sort\" default-value=\"按出版时间排序\" style=\"width: 250px\" @change=\"handleSortChange\">\r\n                <a-select-option v-for=\"item in sortOptions\" :value=\"item\">\r\n                    {{item}}\r\n                </a-select-option>\r\n            </a-select>\r\n        </div>\r\n        <div class=\"list\">\r\n            <div class=\"bookList\">\r\n                <ul>\r\n                    <li v-for=\"book in list\">\r\n                        <div class=\"cover\">\r\n                            <img :src=\"book.pic\"/>\r\n                        </div>\r\n                        <div class=\"info\">\r\n                            <h2 class=\"name\">{{book.bookName}}</h2>\r\n                            <div class=\"otherInfo\">\r\n                                <a-breadcrumb>\r\n                                    <a-breadcrumb-item>{{book.author}}</a-breadcrumb-item>\r\n                                    <a-breadcrumb-item>\r\n                                        {{book.publishDate | formatTime}}\r\n                                    </a-breadcrumb-item>\r\n                                    <a-breadcrumb-item>{{book.press}}</a-breadcrumb-item>\r\n                                </a-breadcrumb>\r\n                            </div>\r\n                            <div class=\"priceWrap\">\r\n                                <span class=\"sellPrice\">¥{{book.price}}</span>\r\n                            </div>\r\n                            <p class=\"desc\">{{book.description}}</p>\r\n                            <div class=\"action\">\r\n                                <el-button type=\"danger\" round @click=\"handleAddCart($event)\" :id=\"book.id\">加入购物车</el-button>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <a-pagination style=\"margin-top:15px;float:right;\" v-model=\"pageNum\" :page-size=\"10\" :total=\"total\" show-less-items @change=\"handleCurrentChange\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { formatDate } from '@/utils/date.js'\r\nimport { searchBooks, addCart } from '@/api/index.js'\r\nimport { getCookie } from '@/utils/support'\r\nexport default {\r\n    data() {\r\n        return {\r\n            keyword: '',\r\n            categoryName: '全部',\r\n            sort: '按出版时间排序',\r\n            list: [],\r\n            pageNum: 1,\r\n            total: 1,\r\n            sortOptions: [\"按出版时间排序\", \"按销量排序\", \"按价格降序\", \"按价格升序\", \"按相关度排序\"],\r\n            catagoryOptions: ['全部', '医学与生物学', '历史与考古', '哲学与宗教', '商业与经济', '地球与环境科学', '工程与应用科学', '数学、物理与化学', '新闻与传播', '法律、政治与政府', '社会科学', '艺术与建筑', '语言与文学', '音乐、舞蹈、戏剧与电影'],\r\n        }\r\n    },\r\n    filters: {\r\n        formatTime(time) {\r\n            let date = new Date(time);\r\n            return formatDate(date, 'yyyy-MM-dd')\r\n        }\r\n    },\r\n    created() {\r\n        this.getList();\r\n    },\r\n    methods: {\r\n        getList() {\r\n            let keyword = this.keyword;\r\n            let categoryName = this.categoryName;\r\n            let pageNum = this.pageNum - 1;\r\n            let pageSize = 10;\r\n            let sortValue = 1;\r\n            if (this.sort == '按销量排序') {\r\n                sortValue = 2\r\n            } else if (this.sort == '按价格升序') {\r\n                sortValue = 3;\r\n            } else if (this.sort == '按价格降序') {\r\n                sortValue = 4\r\n            } else if (this.sort == '按相关度排序') {\r\n                sortValue = 5;\r\n            } else if (this.sort == '按出版时间排序') {\r\n                sortValue = 1;\r\n            }\r\n            searchBooks(keyword, categoryName, pageNum, pageSize, sortValue).then(response => {\r\n                this.list = response.data.content;\r\n                this.total = response.data.total;\r\n            });\r\n        },\r\n        handleSearchList() {\r\n            this.pageNum = 1;\r\n            this.sort = \"按相关度排序\";\r\n            this.getList();\r\n        },\r\n        handleCategoryChange(categoryName) {\r\n            this.categoryName = categoryName;\r\n            this.pageNum=1;\r\n            this.getList();\r\n        },\r\n        handleSortChange(sort) {\r\n            this.sort = sort;\r\n            this.pageNum=1;\r\n            this.getList();\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            this.pageNum = pageNum;\r\n            this.getList();\r\n        },\r\n        handleAddCart(e) {\r\n            let bookId = e.currentTarget.id;\r\n            let price = e.currentTarget.parentElement.previousElementSibling.previousElementSibling.firstElementChild.innerHTML.substr(1);\r\n            let username=getCookie('username');\r\n            addCart(username,bookId, price).then(() => {\r\n                this.$success({\r\n                    title:'加入购物车成功'\r\n                })\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scope>\r\n.ant-breadcrumb {\r\n    font-size: 16px;\r\n}\r\n\r\n.ant-divider-horizontal {\r\n    margin-top: 16px !important;\r\n    margin-bottom: 16px !important;\r\n}\r\n\r\n.list {\r\n    margin-top: 15px;\r\n    float: left;\r\n}\r\n\r\n.bookList {\r\n    float: left;\r\n}\r\n\r\n.bookList ul {\r\n    list-style: none;\r\n    margin: 0px;\r\n}\r\n\r\n.bookList li {\r\n    float: left;\r\n    width: 100%;\r\n    border: 1px solid #e9e9e9;\r\n    padding: 20px 30px 20px 20px;\r\n    border-bottom: 1px solid #e9e9e9;\r\n}\r\n\r\n.bookList li .info h2 {\r\n    height: 18px;\r\n    overflow: hidden;\r\n    font-weight: normal;\r\n    font-size: 14px;\r\n    line-height: 16px;\r\n}\r\n\r\n.bookList li .info .otherInfo {\r\n    margin-top: 6px;\r\n    height: 26px;\r\n    overflow: hidden;\r\n    line-height: 26px;\r\n}\r\n\r\n.bookList li .info .priceWrap {\r\n    height: 30px;\r\n    line-height: 30px;\r\n    vertical-align: bottom;\r\n}\r\n\r\n.bookList li .info .priceWrap span {\r\n    font-size: 18px;\r\n    color: #e60000;\r\n    margin-right: 10px;\r\n    font-family: 'Microsoft YaHei';\r\n}\r\n\r\n.bookList li .info .desc {\r\n    line-height: 22px;\r\n    height: 44px;\r\n    overflow: hidden;\r\n    color: #666666;\r\n    margin-top: 10px;\r\n}\r\n\r\n.bookList li .info .action {\r\n    overflow: hidden;\r\n    margin-top: 10px;\r\n}\r\n\r\n.bookList .cover {\r\n    height: 200px;\r\n    width: 200px;\r\n    float: left;\r\n    display: inline;\r\n    margin-right: 20px;\r\n    text-align: center;\r\n}\r\n.bookList .cover img{\r\n    height: 200px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=d750f728&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&scope=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&scope=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&scope=true&lang=css&\"","import request from '@/utils/request'\r\n\r\nexport function searchBooks(keyword,categoryName,pageNum,pageSize,sort){\r\n\treturn request({\r\n\t\turl:'/index/list',\r\n\t\tmethod:'post',\r\n\t\tdata:{\r\n\t\t\tkeyword:keyword,\r\n\t\t\tcategoryName:categoryName,\r\n\t\t\tpageNum:pageNum,\r\n\t\t\tpageSize:pageSize,\r\n\t\t\tsort:sort\r\n\t\t}\r\n\t})\r\n}\r\nexport function addCart(username,bookId,price){\r\n\treturn request({\r\n\t\turl:'/index/cart',\r\n\t\tmethod:'post',\r\n\t\tdata:{\r\n\t\t\tusername:username,\r\n\t\t\tbookId:bookId,\r\n\t\t\tprice:price,\r\n\t\t}\r\n\t})\r\n}","import Cookies from 'js-cookie'\r\n\r\nconst SupportKey='supportKey'\r\n\r\nexport function getSupport(){\r\n\treturn Cookies.get(SupportKey)\r\n}\r\n\r\nexport function setSupport(isSupport){\r\n\treturn Cookies.set(SupportKey,isSupport,{expires:3})\r\n}\r\n\r\nexport function setCookie(key,value,expires){\r\n\treturn Cookies.set(key,value,{expires:expires})\r\n}\r\n\r\nexport function getCookie(key){\r\n\treturn Cookies.get(key)\r\n}"],"sourceRoot":""}