<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>高性能计算 on cuterwrite (Pang S.Z)</title>
    <link>https://cuterwrite.top/categories/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/</link>
    <description>Recent content in 高性能计算 on cuterwrite (Pang S.Z)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 11 Feb 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://cuterwrite.top/categories/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>RDMA：Soft-RoCE环境搭建实验</title>
      <link>https://cuterwrite.top/p/soft-roce/</link>
      <pubDate>Sat, 11 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://cuterwrite.top/p/soft-roce/</guid>
      <description>Table of Contents generated with DocToc
RDMA: Soft-RoCE环境搭建实验 1. RoCE简介 2. RoCE的协议层次 3. RoCE的优势 4. Soft-RoCE 5. 部署实验 5.1. 实验环境 5.2. 部署RDMA软件栈 5.2.1. 确认当前内核是否支持RXE 5.2.2. 安装用户态动态链接库 5.2.3. 安装iproute2和perftest 5.3. 配置RXE网卡 5.4. 执行perftest测试 RDMA: Soft-RoCE环境搭建实验 1. RoCE简介 RoCE是三大RDMA协议之一，全称为RDMA Over Converged Ethernet，即基于融合以太网的RDMA。它是一种基于传统以太网的部分下层协议，在其基础上实现InfiniBand的部分上层协议。
RoCE的发展历史如下：
1999年，由Compaq, Dell, HP, IBM, Intel, Microsoft和Sun公司组成了IBTA组织。愿景是设计一种更高速的新的互联协议规范标准，来应对传统以太网在面对未来计算机行业的发展时可能遇到的瓶颈。
2000年，IBTA组织设计并发布了Infiniband Architecture Specification 1.0（IB规范）。
2007年，IETF发布了iWARP（Internet Wide Area RDMA Protocol）的一系列RFC。
2010年，IBTA发布了RoCE v1规范。
2014年，IBTA发布了RoCE v2规范。
2. RoCE的协议层次 首先是二层的以太网链路帧，然后是IP报文头和UDP报文头，最后是各层级协议的校验。而Infiniband传输层报文实际上是UDP层的负载，也就是深蓝色背景的部分。UDP报文头中有一个字段Destination Port Number（目的端口号），对于RoCE v2来说固定是4791，当对端网卡收到报文后，会根据该字段识别是普通的以太网数据包，还是RoCE数据包，或者是其他协议的数据包，然后再进行解析。深蓝色背景的IB传输层部分又分成了IB报头，实际的用户数据（Payload）以及校验部分。
3. RoCE的优势 为什么我们有了Infiniband协议之后，还要设计RoCE协议呢？最主要的原因还是成本问题：由于Infiniband协议本身定义了一套全新的层次架构，从链路层到传输层，都无法与现有的以太网设备兼容。也就是说，如果某个数据中心因为性能瓶颈，想要把数据交换方式从以太网切换到Infiniband技术，那么需要购买全套的Infiniband设备，包括网卡、线缆、交换机和路由器等等。商用级设备由于对可靠性有比较高的要求，所以这一套下来是非常昂贵的。</description>
    </item>
    
  </channel>
</rss>
