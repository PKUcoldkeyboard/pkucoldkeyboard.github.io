<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="This article discusses how to use Workbox to add PWA functionality to Hugo static websites, enhancing loading speed and user experience through Service Worker. The advantages of PWA include fast loading, offline access, push notifications, and installation to the home screen. The article provides a detailed introduction to registering Service Worker, using Workbox's caching strategies, and offers detailed configuration steps and example code."><title>Implementing Hugo Progressive Web App Based on Workbox</title>
<link rel=canonical href=https://cuterwrite.top/en/p/hugo-pwa/><link rel=stylesheet href=/scss/style.min.e82b84120b43b340665e4b3c6b625144c63ea87ec3a8572acc62bbd314e4204b.css><meta property='og:title' content="Implementing Hugo Progressive Web App Based on Workbox"><meta property='og:description' content="This article discusses how to use Workbox to add PWA functionality to Hugo static websites, enhancing loading speed and user experience through Service Worker. The advantages of PWA include fast loading, offline access, push notifications, and installation to the home screen. The article provides a detailed introduction to registering Service Worker, using Workbox's caching strategies, and offers detailed configuration steps and example code."><meta property='og:url' content='https://cuterwrite.top/en/p/hugo-pwa/'><meta property='og:site_name' content="Cuterwrite's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='PWA'><meta property='article:published_time' content='2024-06-18T22:28:00+00:00'><meta property='article:modified_time' content='2024-06-18T22:28:00+00:00'><meta property='og:image' content='https://cloud.cuterwrite.fun/img/2024-06-16_116406967_p0_master1200.webp'><meta name=twitter:title content="Implementing Hugo Progressive Web App Based on Workbox"><meta name=twitter:description content="This article discusses how to use Workbox to add PWA functionality to Hugo static websites, enhancing loading speed and user experience through Service Worker. The advantages of PWA include fast loading, offline access, push notifications, and installation to the home screen. The article provides a detailed introduction to registering Service Worker, using Workbox's caching strategies, and offers detailed configuration steps and example code."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://cloud.cuterwrite.fun/img/2024-06-16_116406967_p0_master1200.webp'><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><script async src=https://analytics.cuterwrite.top/uma.js data-website-id=b13594a2-4d15-4a4e-a020-5e3cc1d88c12 data-domains=cuterwrite.top></script><link rel=manifest href=/manifest.json></head><body class="article-page
line-numbers"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/en/><img src=/img/avatar_hu7627246953874065940.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üòâ</span></figure><div class=site-meta><h1 class=site-name><a href=/en>Cuterwrite's Blog</a></h1><h2 class=site-description>Cuterwrite's tech blog, focusing on in-depth exploration and experience sharing in areas such as high-performance computing, operating systems, full-stack development, and artificial intelligence.</h2></div></header><ol class=menu-social><li><a href=https://analytics.cuterwrite.top/share/Ji0gm9OaLDk8gco7 target=_blank title=Analytics rel=me><svg width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5H7A2 2 0 005 7v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/><rect x="9" y="3" width="6" height="4" rx="2"/><path d="M9 17v-5"/><path d="M12 17v-1"/><path d="M15 17v-3"/></svg></a></li><li><a href=https://stats.uptimerobot.com/6NVhRHkSAQ target=_blank title=Uptime rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chart-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 19h16"/><path d="M4 15l4-6 4 2 4-5 4 4"/></svg></a></li><li><a href=/index.xml target=_blank title=RSS rel=me><svg class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li><li><a href=https://github.com/PKUcoldkeyboard target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.zhihu.com/people/kong-tiao-cheng-tai-lang-30-57 target=_blank title=zhihu rel=me><svg t="1705591931290" class="icon" viewBox="0 0 1280 1024" p-id="21048" width="32" height="32"><path d="M341.08 296.26v435.08l46.86.02 15.42 52.74 84.02-52.74h99.06V296.26H341.08zm195.5 387.86H480.7l-55.8 35.02-10.16-34.94-23.8-.08V343.5h145.64v340.62zM299.66 495.34H195c3.48-54.2 4.4-103.18 4.4-146.92h102.32s3.94-45.12-17.16-44.62h-177c6.98-26.24 15.74-53.32 26.24-81.34.0.0-48.14.0-64.54 43.14-6.78 17.8-26.42 86.28-61.4 156.24 11.78-1.28 50.74-2.36 73.68-44.42 4.22-11.78 5.02-13.32 10.28-29.06h57.74c0 21-2.4 133.76-3.36 146.88H41.66c-23.48.0-31.12 47.24-31.12 47.24H141.7C132.9 642.2 85.66 726.24.0 792.68c40.98 11.7 81.82-1.86 102-19.8.0.0 45.96-41.8 71.18-138.5L281.1 764.26s15.82-53.78-2.48-79.98c-15.16-17.84-56.12-66.12-73.58-83.62L175.8 623.9c8.72-27.96 13.98-55.1 15.74-81.34h123.3s-.18-47.24-15.18-47.24v.02zm824.04-3.2c41.66-51.28 89.96-117.14 89.96-117.14s-37.3-29.6-54.76-8.12c-12 16.3-73.66 96.4-73.66 96.4l38.46 28.86zM823.52 373.96c-18.02-16.5-51.82 4.26-51.82 4.26s79.04 110.08 82.24 114.9l38.92-27.46s-51.34-75.22-69.32-91.72h-.02zM1280 516.7c-39.56.0-261.82 1.86-262.12 1.86v-202c9.62.0 24.84-.8 45.7-2.4 81.76-4.82 140.26-8 175.54-9.62.0.0 24.44-54.38-1.18-66.88-6.14-2.36-46.34 9.16-46.34 9.16s-330.44 32.98-464.72 36.1c3.2 17.64 15.24 34.16 31.56 39.1 26.62 6.96 45.38 3.4 98.3 1.78 49.66-3.2 87.36-4.86 113.02-4.86v199.62H702.82s5.64 44.62 51.02 45.7h215.88V706.1c0 27.94-22.38 43.98-48.96 42.24-28.16.22-52.16-2.3-83.38-3.62 3.98 7.94 12.66 28.78 38.62 43.68 19.76 9.62 32.34 13.14 52.04 13.14 59.12.0 91.34-34.56 89.78-90.62V564.28h244.72c19.36.0 17.4-47.56 17.4-47.56l.06-.02z" fill="#707070" p-id="21049"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/en/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>‰∏ªÈ°µ | Home</span></a></li><li><a href=/en/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>ÂÖ≥‰∫é | About</span></a></li><li><a href=/en/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>ÂΩíÊ°£ | Archives</span></a></li><li><a href=/en/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>ÊêúÁ¥¢ | Search</span></a></li><li><a href=https://gallery.cuterwrite.top target=_blank><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-album"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M12 4v7l2-2 2 2V4"/></svg>
<span>ÂõæÂÜå | Gallery</span></a></li><li><a href=https://draw.cuterwrite.top target=_blank><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-artboard"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8m0 1a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H9a1 1 0 01-1-1z"/><path d="M3 8h1"/><path d="M3 16h1"/><path d="M8 3v1"/><path d="M16 3v1"/><path d="M20 8h1"/><path d="M20 16h1"/><path d="M8 20v1"/><path d="M16 20v1"/></svg>
<span>ÁîªÊùø | Canvas</span></a></li><li><a href=https://it-tools.tech target=_blank><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-tools"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4L20 8a1.5 1.5.0 00-4-4L3 17v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8 7 3 3 7l5 5"/><path d="M7 8 5.5 9.5"/><path d="M16 12l5 5-4 4-5-5"/><path d="M16 17l-1.5 1.5"/></svg>
<span>Â∑•ÂÖ∑ | Tools</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://cuterwrite.top/>‰∏≠Êñá</option><option value=https://cuterwrite.top/en/ selected>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#what-is-pwa>What is PWA?</a></li><li><a href=#workbox>Workbox</a></li><li><a href=#configure-pwa>Configure PWA</a><ul><li><a href=#register-service-worker>Register Service Worker</a></li><li><a href=#import-workbox>Import Workbox</a></li><li><a href=#cache-strategy>Cache strategy</a><ul><li><a href=#cacheonly-cache-only>CacheOnly Cache only</a></li><li><a href=#networkonly-network-only>NetworkOnly Network Only</a></li><li><a href=#cachefirst-cache-priority>CacheFirst Cache Priority</a></li><li><a href=#networkfirst-‰ºòÂÖàÁΩëÁªú>NetworkFirst ‰ºòÂÖàÁΩëÁªú</a></li><li><a href=#stalewhilerevalidate-reads-the-cache-while-initiating-a-network-request>StaleWhileRevalidate reads the cache while initiating a network request</a></li><li><a href=#strategy-configuration>Strategy Configuration</a></li></ul></li><li><a href=#site-configuration>Site Configuration</a><ul><li><a href=#global-configuration>Global configuration</a></li><li><a href=#twitto-configuration>Twitto Configuration</a></li><li><a href=#rss-and-sitemap-configuration>RSS and Sitemap Configuration</a></li><li><a href=#html-configuration>HTML Configuration</a></li><li><a href=#google-fonts-configuration>Google Fonts Configuration</a></li><li><a href=#cdn-configuration>CDN Configuration</a></li><li><a href=#umani-website-statistics-configuration>Umani website statistics configuration</a></li><li><a href=#image-configuration>Image Configuration</a></li><li><a href=#suffix-match-configuration>Suffix match configuration</a></li><li><a href=#default-behavior-configuration>Default behavior configuration</a></li></ul></li><li><a href=#full-configuration>Full configuration</a></li><li><a href=#manifestjson>manifest.json</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/en/p/hugo-pwa/><img src=https://cloud.cuterwrite.fun/img/2024-06-16_116406967_p0_master1200.webp loading=lazy alt="Featured image of post Implementing Hugo Progressive Web App Based on Workbox"></a></div><div class=article-details><header class=article-category><a href=/en/categories/frontend/ style=background-color:#afb0b2;color:#fff>Frontend Technology</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/en/p/hugo-pwa/>Implementing Hugo Progressive Web App Based on Workbox</a></h2><h3 class=article-subtitle>This article discusses how to use Workbox to add PWA functionality to Hugo static websites, enhancing loading speed and user experience through Service Worker. The advantages of PWA include fast loading, offline access, push notifications, and installation to the home screen. The article provides a detailed introduction to registering Service Worker, using Workbox's caching strategies, and offers detailed configuration steps and example code.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2024-06-18</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div><div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-keyboard"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M2 6m0 2a2 2 0 012-2h16a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2z"/><path d="M6 10v.01"/><path d="M10 10v.01"/><path d="M14 10v.01"/><path d="M18 10v.01"/><path d="M6 14v.01"/><path d="M18 14v.01"/><path d="M10 14l4 .01"/></svg>
<time class=article-time--wordcount>2150 words</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://cuterwrite.top/p/hugo-pwa/ class=link>‰∏≠Êñá</a></div></footer></div></header><section class=article-content><h1 id=implement-hugo-pwa-based-on-workbox><a href=#implement-hugo-pwa-based-on-workbox class=header-anchor>#</a>
Implement Hugo PWA based on Workbox</h1><p>Recently added PWA functionality to a blog built on <a class=link href=https://gohugo.io/ target=_blank rel=noopener>Hugo
<span style=white-space:nowrap><svg width=".8em" height=".8em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>
</a>, significantly improving loading speed and user experience, even enabling offline access. As for how to achieve this, you need to understand <strong>Progressive Web Apps (PWA)</strong>.</p><h2 id=what-is-pwa><a href=#what-is-pwa class=header-anchor>#</a>
What is PWA?</h2><p>Progressive Web Apps (PWA) leverage modern Web APIs and traditional progressive enhancement strategies to create cross-platform web applications. These applications are ubiquitous, feature-rich, and provide users with an experience comparable to native apps.</p><p><strong>Advantages of PWA:</strong></p><ul><li>‚ö°Ô∏è <strong>Faster loading speed</strong>: PWA can cache important resources and load quickly even in poor network conditions.</li><li>‚úàÔ∏è <strong>Offline Access</strong>: PWA can cache content, allowing users to access content even when offline.</li><li>üîî <strong>Push Notifications</strong>: Like native applications, PWAs can send push notifications to users to increase user engagement.</li><li>üì± <strong>Install to Home Screen</strong>: Users can add your application to the desktop of their computer or phone and browse your web application like a native app.</li></ul><p>The implementation principle of PWA is <strong>Service Worker</strong>. <strong>Service Worker is a special JavaScript resource that runs independently in the browser background, acting as a proxy between the web browser and the web server. It can intercept and handle network requests, cache resources, and push notifications</strong>.</p><p>Mainstream front-end frameworks Vue, React, and Angular all provide corresponding PWA plugins. As for static site generators like Hugo, we can implement PWA functionality by manually adding <a class=link href=https://developer.chrome.com/docs/workbox target=_blank rel=noopener>Workbox
<span style=white-space:nowrap><svg width=".8em" height=".8em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>
</a>.</p><h2 id=workbox><a href=#workbox class=header-anchor>#</a>
Workbox</h2><p><a class=link href=https://developer.chrome.com/docs/workbox target=_blank rel=noopener>Workbox
<span style=white-space:nowrap><svg width=".8em" height=".8em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span>
</a>is a set of modules developed by the Google Chrome team, designed to simplify common Service Worker routing and caching operations. Each module is optimized for a specific aspect of Service Worker development. The goal of Workbox is to simplify the use of Service Workers as much as possible while providing the flexibility to meet the needs of complex applications when necessary.</p><p>If there is no Workbox, we need to manually write a Service Worker to listen to fetch events, cache resources, and implement offline access and other functions. Workbox provides a set of tools that can help us automatically generate a Service Worker and comes with some commonly used caching strategies, allowing us to focus more on business logic.</p><h2 id=configure-pwa><a href=#configure-pwa class=header-anchor>#</a>
Configure PWA</h2><p>In the previous section, we learned about the concept and advantages of PWA, and how Workbox simplifies the development of Service Workers. Next, we will step by step configure PWA functionality for the Hugo blog.</p><h3 id=register-service-worker><a href=#register-service-worker class=header-anchor>#</a>
Register Service Worker</h3><p>First, we need to register the Service Worker on the page. Add the following code snippet to your Hugo theme&rsquo;s <code>layouts/partials/footer/custom.html</code> file (other themes may need adjustments based on the file structure):</p><pre><code class=language-javascript>&lt;script&gt;
    // Check that service workers are registered
    if ('serviceWorker' in navigator) {
        // Use the window load event to keep the page load performant
        window.addEventListener('load', () =&gt; {
            navigator.serviceWorker.register('/sw.js').then(reg =&gt; {
                console.log('Service worker registered with scope: ', reg.scope);
            }, err =&gt; {
                console.log('Service worker registration failed: ', err);
            });
        });
    }
&lt;/script&gt;
</code></pre><blockquote class="alert-blockquote alert-note"><p class=alert-heading><svg viewBox="0 0 16 16" width="16" height="16"><path d="M0 8a8 8 0 1116 0A8 8 0 010 8zm8-6.5a6.5 6.5.0 100 13 6.5 6.5.0 000-13zM6.5 7.75A.75.75.0 017.25 7h1a.75.75.0 01.75.75v2.75h.25a.75.75.0 010 1.5h-2a.75.75.0 010-1.5h.25v-2h-.25a.75.75.0 01-.75-.75zM8 6a1 1 0 110-2 1 1 0 010 2z"/></svg>
<span>Note</span></p><p>Note: Before registering the Service Worker, you need to first create the <code>sw.js</code> file, which we will complete in the next section.</p></blockquote><p>After completing the registration, you can view the registration status of the Service Worker in the developer tools (F12) of the browser under <strong>&ldquo;Application&rdquo; -> &ldquo;Service Workers&rdquo;</strong> panel.</p><figure><img src=https://cloud.cuterwrite.fun/img/2024-06-19_service-worker.webp alt="Service Worker" width=90% loading=lazy><figcaption><h4>Service Worker</h4></figcaption></figure><h3 id=import-workbox><a href=#import-workbox class=header-anchor>#</a>
Import Workbox</h3><p>In the <code>static</code> folder of your Hugo site root directory, create the <code>sw.js</code> file. Then, add the following code in the <code>sw.js</code> file to import Workbox using CDN:</p><pre><code class=language-javascript>importScripts('https://cdn.bootcdn.net/ajax/libs/workbox-sw/7.1.0/workbox-sw.js');
</code></pre><h3 id=cache-strategy><a href=#cache-strategy class=header-anchor>#</a>
Cache strategy</h3><p>Workbox provides some common caching strategies, such as <code>CacheFirst</code>, <code>NetworkFirst</code>, <code>StaleWhileRevalidate</code>, etc. Here we introduce some common strategies first.</p><h4 id=cacheonly-cache-only><a href=#cacheonly-cache-only class=header-anchor>#</a>
CacheOnly Cache only</h4><figure><img src=https://cloud.cuterwrite.fun/img/2024-06-19_cache-6850d07d742bf_1440.webp alt=CacheOnly width=90% loading=lazy><figcaption><h4>CacheOnly</h4></figcaption></figure><p>Forced response from cache.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp(regex),
    new workbox.strategies.CacheOnly()
);
</code></pre><h4 id=networkonly-network-only><a href=#networkonly-network-only class=header-anchor>#</a>
NetworkOnly Network Only</h4><figure><img src=https://cloud.cuterwrite.fun/img/2024-06-19_network-48f46158a5575_1440.webp alt=NetworkOnly width=90% loading=lazy><figcaption><h4>NetworkOnly</h4></figcaption></figure><p>This caching strategy forces all requests to retrieve the latest data from the network, completely bypassing the cache.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp(regex),
    new workbox.strategies.NetworkOnly()
);
</code></pre><h4 id=cachefirst-cache-priority><a href=#cachefirst-cache-priority class=header-anchor>#</a>
CacheFirst Cache Priority</h4><figure><img src=https://cloud.cuterwrite.fun/img/2024-06-19_cache-falling-to-networ-f4c1aa5570621_1440.webp alt=CacheFirst width=90% loading=lazy><figcaption><h4>CacheFirst</h4></figcaption></figure><p>This caching strategy prioritizes speed, first attempting to retrieve the response from the cache to display content to the user as quickly as possible. If the required data is not in the cache, it will then make a request to the network to obtain the data.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp(regex),
    new workbox.strategies.CacheFirst()
);
</code></pre><h4 id=networkfirst-‰ºòÂÖàÁΩëÁªú><a href=#networkfirst-%e4%bc%98%e5%85%88%e7%bd%91%e7%bb%9c class=header-anchor>#</a>
NetworkFirst ‰ºòÂÖàÁΩëÁªú</h4><figure><img src=https://cloud.cuterwrite.fun/img/2024-06-19_network-falling-to-cache-39d267a044b35_1440.webp alt=NetworkFirst width=90% loading=lazy><figcaption><h4>NetworkFirst</h4></figcaption></figure><p>This caching strategy prioritizes using the latest data, so it will first attempt to fetch the response from the network. If the network request fails, such as when the user is offline or the network connection is unstable, it will fall back to using cached data to ensure that the user can still access the content.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp(regex),
    new workbox.strategies.NetworkFirst()
);
</code></pre><h4 id=stalewhilerevalidate-reads-the-cache-while-initiating-a-network-request><a href=#stalewhilerevalidate-reads-the-cache-while-initiating-a-network-request class=header-anchor>#</a>
StaleWhileRevalidate reads the cache while initiating a network request</h4><figure><img src=https://cloud.cuterwrite.fun/img/2024-06-19_cache-network-873b1ec5f25cc_1440.webp alt=StaleWhileRevalidate width=90% loading=lazy><figcaption><h4>StaleWhileRevalidate</h4></figcaption></figure><p>This caching strategy prioritizes returning cached content (if available). Even if the cached content is valid, it will initiate a network request in the background to obtain the latest data, ensuring that the user ultimately sees the most up-to-date content. Although this strategy ensures that the cache is regularly updated for the user, it also means that every request generates network traffic, which can be a waste of bandwidth even if the data hasn&rsquo;t changed.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp(regex),
    new workbox.strategies.StaleWhileRevalidate()
);
</code></pre><h4 id=strategy-configuration><a href=#strategy-configuration class=header-anchor>#</a>
Strategy Configuration</h4><p>Workbox not only provides the aforementioned strategies but also allows customization through configuration options such as cacheName, plugins, and expiration. You can customize routing behavior by defining the plugins you want to use. For example, you can configure the cache name, cache expiration, and cacheable response status codes as follows:</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp(regex),
    new workbox.strategies.CacheFirst({
        cacheName: 'my-cache',
        plugins: [
            new workbox.expiration.ExpirationPlugin({
                maxEntries: 60,
                maxAgeSeconds: 30 * 24 * 60 * 60, // 30 Days
            }),
            new workbox.cacheableResponse.CacheableResponsePlugin({
                statuses: [0, 200],
            }),
        ],
    })
);
</code></pre><h3 id=site-configuration><a href=#site-configuration class=header-anchor>#</a>
Site Configuration</h3><h4 id=global-configuration><a href=#global-configuration class=header-anchor>#</a>
Global configuration</h4><p>The following is the global cache configuration:</p><pre><code class=language-javascript>// Cache version number
let cacheVersion = '-240619';
// Maximum number of entries
const maxEntries = 100;
</code></pre><h4 id=twitto-configuration><a href=#twitto-configuration class=header-anchor>#</a>
Twitto Configuration</h4><p>In order to ensure that users can view comments even when offline, the Twitto Comments API uses a <code>NetworkFirst</code> caching strategy. This means the browser will first attempt to fetch the latest data from the network, and if the network is unavailable, it will use the data from the cache.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('^https://comment\.cuterwrite\.top'),
    new workbox.strategies.NetworkFirst({
        plugins: [
            new workbox.expiration.ExpirationPlugin({
                maxEntries: maxEntries,
                maxAgeSeconds: 30 * 24 * 60 * 60,
            }),
            new workbox.cacheableResponse.CacheableResponsePlugin({
                statuses: [0, 200],
            }),
        ],
    })
);
</code></pre><h4 id=rss-and-sitemap-configuration><a href=#rss-and-sitemap-configuration class=header-anchor>#</a>
RSS and Sitemap Configuration</h4><p>In order to ensure that users always obtain the latest RSS and Sitemap data, these pages are configured to use only the network strategy (<code>NetworkOnly</code>) without caching.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('^https://cuterwrite\.top/(index|sitemap)\.xml'),
    new workbox.strategies.NetworkOnly()
);
</code></pre><h4 id=html-configuration><a href=#html-configuration class=header-anchor>#</a>
HTML Configuration</h4><p>In order to ensure that users can quickly load pages while also obtaining the latest content, the website uses the <code>StaleWhileRevalidate</code> caching strategy for HTML pages. This means the browser will prioritize displaying the page from the cache while simultaneously making a request to the server in the background to fetch the latest version, which will be used on the next request.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('.*\.html'),
    new workbox.strategies.StaleWhileRevalidate({
        cacheName: 'html-cache' + cacheVersion,
        plugins: [
            new workbox.expiration.ExpirationPlugin({
                maxEntries: maxEntries,
                maxAgeSeconds: 30 * 24 * 60 * 60,
            }),
            new workbox.cacheableResponse.CacheableResponsePlugin({
                statuses: [0, 200],
            }),
        ],
    })
);
</code></pre><h4 id=google-fonts-configuration><a href=#google-fonts-configuration class=header-anchor>#</a>
Google Fonts Configuration</h4><p>In order to ensure the font files are updated while also utilizing caching to speed up page loading, the website uses a <code>CacheFirst</code> caching strategy for Google Fonts resources and sets a long cache expiration time.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('.*\.(?:woff|woff2|ttf|otf|eot)'),
    new workbox.strategies.StaleWhileRevalidate({
        cacheName: 'google-fonts' + cacheVersion,
        plugins: [
            // Use expiration plugin to control the number and time of cache entries
            new workbox.expiration.ExpirationPlugin({
                // Maximum number of cache entries
                maxEntries: maxEntries,
                // Maximum cache time 30 days
                maxAgeSeconds: 30 * 24 * 60 * 60,
            }),
            // Use cacheableResponse plugin to cache requests with status code 0
            new workbox.cacheableResponse.CacheableResponsePlugin({
                statuses: [0, 200],
            }),
        ],
    })
);
</code></pre><h4 id=cdn-configuration><a href=#cdn-configuration class=header-anchor>#</a>
CDN Configuration</h4><p>In order to maximize the use of cache to speed up page loading, the website adopts a <code>CacheFirst</code> caching strategy for resources from common CDNs and sets a long cache expiration time.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('^https://(?:cdn\.bootcdn\.net|unpkg\.com|cdn\.jsdelivr\.net)'),
    new workbox.strategies.CacheFirst({
        cacheName: 'cdn' + cacheVersion,
        fetchOptions: {
            mode: 'cors',
            credentials: 'omit',
        },
        plugins: [
            new workbox.expiration.ExpirationPlugin({
                maxEntries: maxEntries,
                maxAgeSeconds: 30 * 24 * 60 * 60,
            }),
        ],
    })
);
</code></pre><h4 id=umani-website-statistics-configuration><a href=#umani-website-statistics-configuration class=header-anchor>#</a>
Umani website statistics configuration</h4><p>In order to ensure the accuracy of website statistics, the website adopts the <code>NetworkOnly</code> strategy for Umani website statistics requests and uses the <code>BackgroundSyncPlugin</code> to ensure that data is eventually sent successfully even when the network is offline.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('^https://analytics\.cuterwrite\.top/uma'),
    new workbox.strategies.NetworkOnly({
        plugins: [
            // Use background sync plugin to implement background synchronization
            new workbox.backgroundSync.BackgroundSyncPlugin('Optical_Collect', {
                maxRetentionTime: 12 * 60,
            }),
        ],
    })
);
</code></pre><h4 id=image-configuration><a href=#image-configuration class=header-anchor>#</a>
Image Configuration</h4><p>In order to speed up image loading and reduce the number of network requests, the website uses a <code>CacheFirst</code> caching strategy for image resources and sets a long cache expiration time.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('^(https://cuterwrite-1302252842\.file\.myqcloud\.com|https://s2\.loli\.net)'),
    new workbox.strategies.CacheFirst({
        cacheName: 'image-cache' + cacheVersion,
        plugins: [
            new workbox.expiration.ExpirationPlugin({
                maxEntries: maxEntries,
                maxAgeSeconds: 30 * 24 * 60 * 60,
            }),
            new workbox.cacheableResponse.CacheableResponsePlugin({
                statuses: [0, 200],
            }),
        ],
    })
);
</code></pre><h4 id=suffix-match-configuration><a href=#suffix-match-configuration class=header-anchor>#</a>
Suffix match configuration</h4><p>In order to balance loading speed and content updates, the website uses the <code>StaleWhileRevalidate</code> caching strategy for static files (such as images, CSS, and JavaScript files) that are not matched by the domain name.</p><pre><code class=language-javascript>workbox.routing.registerRoute(
    new RegExp('.*\.(?:png|jpg|jpeg|svg|gif|webp|ico)'),
    new workbox.strategies.StaleWhileRevalidate()
);
workbox.routing.registerRoute(
    new RegExp('.*\.(css|js)'),
    new workbox.strategies.StaleWhileRevalidate()
);
</code></pre><h4 id=default-behavior-configuration><a href=#default-behavior-configuration class=header-anchor>#</a>
Default behavior configuration</h4><p>In order to handle requests that are not matched by any custom routing rules, the website is configured with a default caching behavior, using the <code>NetworkFirst</code> strategy and setting a network timeout to balance resource retrieval speed and offline availability.</p><pre><code class=language-javascript>workbox.routing.setDefaultHandler(
    // Prefer using cache, if cache is not available then use network request
    new workbox.strategies.NetworkFirst({
        networkTimeoutSeconds: 3,
    })
);
</code></pre><h3 id=full-configuration><a href=#full-configuration class=header-anchor>#</a>
Full configuration</h3><details><summary>sw.js</summary><pre><code class=language-javascript>importScripts('https://cdn.bootcdn.net/ajax/libs/workbox-sw/7.1.0/workbox-sw.js');

// Cache version number
let cacheVersion = '-240619';
// Maximum number of entries
const maxEntries = 100;

if (workbox) {
    console.log(`Yay! Workbox is loaded üéâ`);
    // Comment cache
    workbox.routing.registerRoute(
        new RegExp('^https://comment\.cuterwrite\.top'),
        new workbox.strategies.NetworkFirst({
            plugins: [
                new workbox.expiration.ExpirationPlugin({
                    maxEntries: maxEntries,
                    maxAgeSeconds: 30 * 24 * 60 * 60,
                }),
                new workbox.cacheableResponse.CacheableResponsePlugin({
                    statuses: [0, 200],
                }),
            ],
        })
    );
    // Do not cache rss and sitemap
    workbox.routing.registerRoute(
        new RegExp('^https://cuterwrite\.top/(index|sitemap)\.xml'),
        new workbox.strategies.NetworkOnly()
    );
    // Cache HTML
    workbox.routing.registerRoute(
        new RegExp('.*\.html'),
        new workbox.strategies.StaleWhileRevalidate({
            cacheName: 'html-cache' + cacheVersion,
            plugins: [
                new workbox.expiration.ExpirationPlugin({
                    maxEntries: maxEntries,
                    maxAgeSeconds: 30 * 24 * 60 * 60,
                }),
                new workbox.cacheableResponse.CacheableResponsePlugin({
                    statuses: [0, 200],
                }),
            ],
        })
    );
    // Cache Google Fonts
    workbox.routing.registerRoute(
        new RegExp('.*\.(?:woff|woff2|ttf|otf|eot)'),
        new workbox.strategies.StaleWhileRevalidate({
            cacheName: 'google-fonts' + cacheVersion,
            plugins: [
                // Use expiration plugin to control cache entry number and time
                new workbox.expiration.ExpirationPlugin({
                    // Maximum number of cache entries
                    maxEntries: maxEntries,
                    // Maximum cache time 30 days
                    maxAgeSeconds: 30 * 24 * 60 * 60,
                }),
                // Use cacheableResponse plugin to cache requests with status code 0
                new workbox.cacheableResponse.CacheableResponsePlugin({
                    statuses: [0, 200],
                }),
            ],
        })
    );
    // Cache public libraries like bootcdn, unpkg, jsdelivr using regex
    workbox.routing.registerRoute(
        new RegExp('^https://(?:cdn\.bootcdn\.net|unpkg\.com|cdn\.jsdelivr\.net)'),
        new workbox.strategies.CacheFirst({
            cacheName: 'cdn' + cacheVersion,
            fetchOptions: {
                mode: 'cors',
                credentials: 'omit',
            },
            plugins: [
                new workbox.expiration.ExpirationPlugin({
                    maxEntries: maxEntries,
                    maxAgeSeconds: 30 * 24 * 60 * 60,
                }),
            ],
        })
    );
    // Self-built UMA statistics script: https://analytics.cuterwrite.top/uma
    workbox.routing.registerRoute(
        new RegExp('^https://analytics\.cuterwrite\.top/uma'),
        new workbox.strategies.NetworkOnly({
            plugins: [
                // Use background sync plugin for background synchronization
                new workbox.backgroundSync.BackgroundSyncPlugin('Optical_Collect', {
                    maxRetentionTime: 12 * 60,
                }),
            ],
        })
    );
    // Cache bucket images https://cloud.cuterwrite.fun/
    workbox.routing.registerRoute(
        new RegExp('^(https://cuterwrite-1302252842\.file\.myqcloud\.com|https://s2\.loli\.net)'),
        new workbox.strategies.CacheFirst({
            cacheName: 'image-cache' + cacheVersion,
            plugins: [
                new workbox.expiration.ExpirationPlugin({
                    maxEntries: maxEntries,
                    maxAgeSeconds: 30 * 24 * 60 * 60,
                }),
                new workbox.cacheableResponse.CacheableResponsePlugin({
                    statuses: [0, 200],
                }),
            ],
        })
    );

    // Suffix matching for other static files not matched by domain
    workbox.routing.registerRoute(
        new RegExp('.*\.(?:png|jpg|jpeg|svg|gif|webp|ico)'),
        new workbox.strategies.StaleWhileRevalidate()
    );
    workbox.routing.registerRoute(
        new RegExp('.*\.(css|js)'),
        new workbox.strategies.StaleWhileRevalidate()
    );

    // Default match for remaining requests
    workbox.routing.setDefaultHandler(
        // Prefer cache, if cache is not available, use network request
        new workbox.strategies.NetworkFirst({
            networkTimeoutSeconds: 3,
        })
    );

} else {
    console.log(`Boo! Workbox didn't load üò¨`);
}
</code></pre></details><h3 id=manifestjson><a href=#manifestjson class=header-anchor>#</a>
manifest.json</h3><ol><li><strong>Create manifest.json file</strong></li></ol><p>Create a <code>manifest.json</code> file in the <code>static</code> folder at the root directory of your Hugo blog, which contains metadata about your blog, such as name, icon, and display options.</p><pre><code class=language-json>{
    &quot;name&quot;: &quot;Your Blog Name&quot;,
    &quot;short_name&quot;: &quot;Blog Short Name&quot;,
    &quot;start_url&quot;: &quot;/&quot;,
    &quot;display&quot;: &quot;standalone&quot;,
    &quot;background_color&quot;: &quot;#ffffff&quot;,
    &quot;theme_color&quot;: &quot;#000000&quot;,
    &quot;icons&quot;: [{
            &quot;src&quot;: &quot;/icon-192x192.png&quot;,
            &quot;sizes&quot;: &quot;192x192&quot;,
            &quot;type&quot;: &quot;image/png&quot;
        },
        {
            &quot;src&quot;: &quot;/icon-512x512.png&quot;,
            &quot;sizes&quot;: &quot;512x512&quot;,
            &quot;type&quot;: &quot;image/png&quot;
        }
    ]
}
</code></pre><blockquote class="alert-blockquote alert-note"><p class=alert-heading><svg viewBox="0 0 16 16" width="16" height="16"><path d="M0 8a8 8 0 1116 0A8 8 0 010 8zm8-6.5a6.5 6.5.0 100 13 6.5 6.5.0 000-13zM6.5 7.75A.75.75.0 017.25 7h1a.75.75.0 01.75.75v2.75h.25a.75.75.0 010 1.5h-2a.75.75.0 010-1.5h.25v-2h-.25a.75.75.0 01-.75-.75zM8 6a1 1 0 110-2 1 1 0 010 2z"/></svg>
<span>Note</span></p><p>Note: Replace icon-192x192.png and icon-512x512.png with your own icon filenames. And make sure to place these two icon files in the <code>static</code> folder of your Hugo blog. If you want to modify the theme color and background color, you can modify the theme_color and background_color fields.</p></blockquote><ol start=2><li><strong>Link manifest.json file</strong></li></ol><p>In your Hugo blog&rsquo;s <code>layouts/partials/head/custom.html</code> file, add the following code to link the <code>manifest.json</code> file to your website:</p><pre><code class=language-html>&lt;link rel=&quot;manifest&quot; href=&quot;/manifest.json&quot;&gt;
</code></pre><p>After completing the above steps, your Hugo blog will have PWA functionality, allowing users to access your site as if it were a native application.</p><h2 id=references><a href=#references class=header-anchor>#</a>
References</h2><ul><li><p><a class=link href="https://web.dev/articles/offline-cookbook?hl=zh-cn" target=_blank rel=noopener>Offline Cookbook
<span style=white-space:nowrap><svg width=".8em" height=".8em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li><li><p><a class=link href=https://developers.google.com/web/tools/workbox target=_blank rel=noopener>Workbox
<span style=white-space:nowrap><svg width=".8em" height=".8em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li><li><p><a class=link href=https://github.com/GoogleChrome/workbox target=_blank rel=noopener>Workbox Github
<span style=white-space:nowrap><svg width=".8em" height=".8em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></li></ul></section><footer class=article-footer><section class=article-tags><a href=/en/tags/pwa/>PWA</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><script type=text/javascript src=/js/prism.js async></script><link rel=stylesheet href=https://libs.jshub.com/KaTeX/0.16.8/katex.min.css integrity="sha256-3574TpfThVfeAhg+I4+N39EJiLN3QUkuEsMVe8hWAR4=" crossorigin=anonymous><script src=https://libs.jshub.com/KaTeX/0.16.8/katex.min.js integrity="sha256-1PDqJcTMt5hrIp1kJ3lLcGPPMgmwN2z1pkv8TdeRjJU=" crossorigin=anonymous defer></script><script src=https://libs.jshub.com/KaTeX/0.16.8/contrib/auto-render.min.js integrity="sha256-nLjaz8CGwpZsnsS6VPSi3EO3y+KzPOwaJ0PYhsf7R6c=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><script src=https://unpkg.com/twikoo@1.6.39/dist/twikoo.all.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-time,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send{color:var(--twikoo-body-text-color-main)}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://comment.cuterwrite.top",el:"#tcomment",lang:"zh-CN"})</script><footer class=site-footer><section class=copyright>&copy;
2021 -
2024 cuterwrite</section><section class=running-time>Êú¨ÂçöÂÆ¢Â∑≤Á®≥ÂÆöËøêË°å
<span id=runningdays class=running-days></span><br>ÊÄªËÆøÂÆ¢Êï∞Ôºö
<span id=busuanzi_value_site_uv class=running-days>Loading</span><br>ÊÄªËÆøÈóÆÈáèÔºö
<span id=busuanzi_value_site_pv class=running-days>Loading</span></section><section class=totalcount>ÂèëË°®‰∫Ü
<span class=running-days>25</span> ÁØáÊñáÁ´† ¬∑
ÊÄªËÆ°
<span class=running-days>60.67k</span> Â≠ó</section><section class=powerby><hr>Built with <b><a style=color:#9e8f9f href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a></b><br>Theme <b><a style=color:#9e8f9f href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a><br><span>Âü∫‰∫é <a href=https://github.com/CaiJimmy/hugo-theme-stack/tree/v3.27.0 target=_blank rel=noopener><b style=color:#9e8f9f>v3.27.0</b></a> ÂàÜÊîØÁâàÊú¨‰øÆÊîπ</span><br></section></footer><script>let s1="2021-4-17";s1=new Date(s1.replace(/-/g,"/"));let s2=new Date,timeDifference=s2.getTime()-s1.getTime(),days=Math.floor(timeDifference/(1e3*60*60*24)),hours=Math.floor(timeDifference%(1e3*60*60*24)/(1e3*60*60)),minutes=Math.floor(timeDifference%(1e3*60*60)/(1e3*60)),result=days+"Â§©"+hours+"Â∞èÊó∂"+minutes+"ÂàÜÈíü";document.getElementById("runningdays").innerHTML=result</script><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://libs.jshub.com/photoswipe/4.1.3/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://libs.jshub.com/photoswipe/4.1.3/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://libs.jshub.com/photoswipe/4.1.3/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://libs.jshub.com/photoswipe/4.1.3/photoswipe.min.css crossorigin=anonymous></main></div><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.font.im/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><meta name=apple-mobile-web-app-capable content="yes"><meta name=theme-color content="#ffffff"><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service worker registered with scope: ",e.scope)},e=>{console.log("Service worker registration failed: ",e)})})</script><script defer src=https://cn.vercount.one/js></script></body></html>